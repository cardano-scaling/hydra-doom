"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isNextTransactionResponse = exports.handler = exports.nextTransaction = void 0;
const Connection_1 = require("../Connection");
function nextTransaction(context, params) {
    return (0, Connection_1.Method)({
        method: 'nextTransaction',
        params
    }, { handler: (response, resolve, reject) => handler(response, resolve, reject, params) }, context);
}
exports.nextTransaction = nextTransaction;
function handler(response, resolve, reject, params) {
    if (isNextTransactionResponse(response)) {
        if (response.result.transaction === null) {
            resolve(null);
        }
        else if (params?.fields === 'all') {
            resolve(response.result.transaction);
        }
        else {
            resolve(response.result.transaction.id);
        }
    }
    else {
        reject(response);
    }
}
exports.handler = handler;
function isNextTransactionResponse(response) {
    return typeof response?.result?.transaction !== 'undefined';
}
exports.isNextTransactionResponse = isNextTransactionResponse;
//# sourceMappingURL=nextTransaction.js.map