"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.WsProvider = void 0;
const rxjs_1 = require("rxjs");
class WsProvider {
    constructor() {
        this.health$ = this.healthSubject$ = new rxjs_1.ReplaySubject(1);
        this.healthSubject$.next({ ok: false, reason: 'starting' });
    }
    emitHealth(reason, overwrite) {
        if (!reason) {
            this.reason = undefined;
            return this.healthSubject$.next({ ok: true });
        }
        if (overwrite || !this.reason)
            this.reason = reason;
        this.healthSubject$.next({ ok: false, reason: this.reason });
    }
    healthCheck() {
        return (0, rxjs_1.firstValueFrom)(this.health$);
    }
}
exports.WsProvider = WsProvider;
//# sourceMappingURL=WebSocket.js.map