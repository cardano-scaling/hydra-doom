"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.estimateStakePoolAPY = void 0;
const util_1 = require("@cardano-sdk/util");
const MILLISECONDS_PER_DAY = 1000 * 60 * 60 * 24;
const estimateStakePoolAPY = (rewardsHistory) => {
    if (rewardsHistory.length === 0)
        return null;
    const { activeStake, epochLength, memberRewards, pledge } = rewardsHistory.reduce((previous, current) => ({
        activeStake: previous.activeStake + current.activeStake,
        epochLength: previous.epochLength + current.epochLength,
        memberRewards: previous.memberRewards + current.memberRewards,
        pledge: previous.pledge + current.activeStake
    }));
    return (0, util_1.Percent)((Number(memberRewards) / Number(activeStake - pledge) / (epochLength / MILLISECONDS_PER_DAY)) * 365);
};
exports.estimateStakePoolAPY = estimateStakePoolAPY;
//# sourceMappingURL=estimateStakePoolAPY.js.map