"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.metadatumToJson = exports.jsonToMetadatum = exports.asMetadatumArray = exports.asMetadatumMap = void 0;
const util_1 = require("@cardano-sdk/util");
const asMetadatumMap = (metadatum) => {
    if (metadatum instanceof Map) {
        return metadatum;
    }
    return null;
};
exports.asMetadatumMap = asMetadatumMap;
const asMetadatumArray = (metadatum) => {
    if (Array.isArray(metadatum)) {
        return metadatum;
    }
    return null;
};
exports.asMetadatumArray = asMetadatumArray;
const jsonToMetadatum = (json) => {
    if (json === null)
        throw new util_1.InvalidArgumentError('json', 'JSON value can not be null');
    switch (typeof json) {
        case 'boolean':
        case 'undefined':
            throw new util_1.InvalidArgumentError('json', `JSON value can not be ${typeof json}`);
        case 'number':
        case 'bigint': {
            return BigInt(json);
        }
        case 'string':
            return String(json);
        default: {
            if (Array.isArray(json)) {
                const array = [];
                for (const metadataItem of json) {
                    array.push((0, exports.jsonToMetadatum)(metadataItem));
                }
                return array;
            }
            else if (ArrayBuffer.isView(json)) {
                return new Uint8Array(json.buffer);
            }
            const metadataMap = new Map();
            for (const key in json) {
                const val = json[key];
                metadataMap.set((0, exports.jsonToMetadatum)(key), (0, exports.jsonToMetadatum)(val));
            }
            return metadataMap;
        }
    }
};
exports.jsonToMetadatum = jsonToMetadatum;
const metadatumToJson = (metadatum) => {
    if (metadatum === null)
        throw new util_1.InvalidArgumentError('data', 'Metadatum value can not be null');
    switch (typeof metadatum) {
        case 'boolean':
        case 'undefined':
        case 'number':
            throw new util_1.InvalidArgumentError('metadatum', `Metadatum value can not be ${typeof metadatum}`);
        case 'bigint': {
            return metadatum;
        }
        case 'string':
            return metadatum;
        default: {
            if (Array.isArray(metadatum)) {
                const array = [];
                for (const metadataItem of metadatum) {
                    array.push((0, exports.metadatumToJson)(metadataItem));
                }
                return array;
            }
            else if (ArrayBuffer.isView(metadatum)) {
                return new Uint8Array(metadatum);
            }
            const object = {};
            for (const [key, value] of metadatum.entries()) {
                object[(0, exports.metadatumToJson)(key)] = (0, exports.metadatumToJson)(value);
            }
            return object;
        }
    }
};
exports.metadatumToJson = metadatumToJson;
//# sourceMappingURL=metadatum.js.map