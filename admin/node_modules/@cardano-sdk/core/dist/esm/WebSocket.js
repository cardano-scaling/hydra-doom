import { ReplaySubject, firstValueFrom } from 'rxjs';
export class WsProvider {
    constructor() {
        this.health$ = this.healthSubject$ = new ReplaySubject(1);
        this.healthSubject$.next({ ok: false, reason: 'starting' });
    }
    emitHealth(reason, overwrite) {
        if (!reason) {
            this.reason = undefined;
            return this.healthSubject$.next({ ok: true });
        }
        if (overwrite || !this.reason)
            this.reason = reason;
        this.healthSubject$.next({ ok: false, reason: this.reason });
    }
    healthCheck() {
        return firstValueFrom(this.health$);
    }
}
//# sourceMappingURL=WebSocket.js.map